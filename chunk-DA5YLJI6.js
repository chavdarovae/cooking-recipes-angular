import{a as G}from"./chunk-E6DPQR47.js";import{a as H}from"./chunk-3HMAMF5B.js";import"./chunk-2ON5S4CW.js";import{a as D,b as P,c as $,d as k,e as A,g as B}from"./chunk-2BZ7BMZ6.js";import{a as O}from"./chunk-HTD5VXYV.js";import"./chunk-43QX4XP5.js";import{A as _,Aa as L,B as w,Ca as N,Da as h,Ea as I,I as c,J as s,S as o,Ta as U,Va as q,Xa as F,Y as y,_ as l,ba as b,d as g,e as f,fa as d,ga as m,hb as M,la as V,m as R,ma as u,mb as j,na as p,o as x,s as v,t as C,ua as T,va as E,xa as S}from"./chunk-GIOW2ZCS.js";var z=a=>({ui:a});function J(a,r){if(a&1){let t=V();d(0,"div",1)(1,"form",2,0)(3,"clt-input-field",3),u("onInpChanged",function(e){c(t);let n=p();return s(n.recipe.title=e)}),m(),d(4,"clt-input-textarea",4),u("onInpChanged",function(e){c(t);let n=p();return s(n.recipe.description=e)}),m(),d(5,"clt-input-textarea",5),u("onInpChanged",function(e){c(t);let n=p();return s(n.recipe.ingredients=e)}),m(),d(6,"clt-input-field",6),u("onInpChanged",function(e){c(t);let n=p();return s(n.recipe.instructions=e)}),m(),d(7,"clt-input-field",7),u("onInpChanged",function(e){c(t);let n=p();return s(n.recipe.image=e)}),m(),d(8,"div")(9,"button",8),u("click",function(){c(t);let e=p();return s(e.userIteractionSubj.next(e.allowedInteraction))}),E(10),h(11,"titlecase"),m()()()()}if(a&2){let t=T(2),i=p();o(3),l("minLength",2)("isRequired",!0)("inpValue",i.recipe.title),o(),l("minLength",10)("maxLength",100)("isRequired",!0)("inpValue",i.recipe.description),o(),l("minLength",10)("maxLength",400)("isRequired",!0)("inpValue",i.recipe.ingredients),o(),l("minLength",10)("isRequired",!0)("inpValue",i.recipe.instructions),o(),l("minLength",6)("isRequired",!0)("inpValue",i.recipe.image),o(2),l("disabled",t.invalid||t.pristine),o(),S(" ",I(11,19,i.allowedInteraction)," Recipe ")}}var Y=class a{recipeService=_(H);alertService=_(O);router=_(M);userIteractionSubj=new g;userIteraction$;allowedInteraction;recipe;currInteraction;ngOnInit(){this.recipe=history.state?.recipe??new G,this.allowedInteraction=this.recipe?.id?"update":"create",this.initUserInteraction()}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(x(),C(r=>this.currInteraction=r),v(r=>{switch(r){case"create":return this.recipeService.create(this.recipe);case"update":return this.recipeService.update(this.recipe)}}),C(()=>{this.router.navigateByUrl("/recipes"),this.alertService.showAlert({alert:`The recipe was successfully ${this.currInteraction}d!`,type:"success"})}),R(r=>(console.error("Recipe operation failed:",r),this.initUserInteraction(),f)))}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=w({type:a,selectors:[["rcp-recipe-create-edit"]],standalone:!0,features:[L],decls:2,vars:5,consts:[["createForm","ngForm"],[1,"container"],[1,"form","w80","pt-30","pb-30","pl-50","pr-50"],["label","Recipe Title","modelName","recipeTitle","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Description","modelName","description",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Ingredients","modelName","ingredients",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Instructions","modelName","instructions","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Image URL","modelName","instructions","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["type","submit",1,"accent",3,"click","disabled"]],template:function(t,i){if(t&1&&(y(0,J,12,21,"div",1),h(1,"async")),t&2){let e;b((e=N(3,z,I(1,1,i.userIteraction$)))?0:-1,e)}},dependencies:[F,U,q,k,$,D,P,j,A,B]})};export{Y as RecipeCreateEditComponent};
