import{c as N}from"./chunk-BX74QCOJ.js";import"./chunk-2ON5S4CW.js";import{b as y,e as A,f as T,i as k}from"./chunk-2BZ7BMZ6.js";import{a as R,b as F,i as O}from"./chunk-43QX4XP5.js";import{A as d,Aa as C,B as g,Ba as U,Ca as m,La as w,Na as b,O as P,R as E,S as o,_ as s,da as x,ea as L,fa as r,fb as q,ga as i,ha as l,hb as I,ib as h,ma as f,va as c,wa as v,xa as M,za as _}from"./chunk-GIOW2ZCS.js";var V=n=>["/users/",n],G=n=>({user:n}),S=class n{account=P.required();static \u0275fac=function(a){return new(a||n)};static \u0275cmp=g({type:n,selectors:[["rcp-user-card"]],inputs:{account:[1,"account"]},standalone:!0,features:[_([y]),C],decls:17,vars:10,consts:[[1,"account","jumpy-card","row","row--no-wrap","gap-20"],[1,"fa-solid","fa-user"],[1,"account__body","col","col--no-wrap","gap-10"],[1,"text-accent"],[1,"text-accent",3,"href"],["routerLinkActive","router-link-active",1,"accent","span-2","w100","mt-10",3,"routerLink","state"]],template:function(a,t){a&1&&(r(0,"article",0),l(1,"i",1),r(2,"div",2)(3,"span"),c(4,"Username:"),i(),r(5,"span",3),c(6),i(),r(7,"span"),c(8,"Email:"),i(),r(9,"a",4),c(10),i(),r(11,"span"),c(12,"Role:"),i(),r(13,"span",3),c(14),i(),r(15,"button",5),c(16," Edit User "),i()()()),a&2&&(o(6),v(t.account().username),o(3),s("href","mailto:"+t.account().email,E),o(),M(" ",t.account().email," "),o(4),v(t.account().role),o(),s("routerLink",m(6,V,t.account().id))("state",m(8,G,t.account())))},dependencies:[h],styles:[".card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,390px)}.account[_ngcontent-%COMP%]{width:fit-content;height:fit-content;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;padding:1rem}.account[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:130px}.account[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.05)}.account__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:90px 130px;justify-items:start}"]})};var H=(n,e)=>e.id,J=n=>[n],Q=()=>["/recipes/add-new-user"];function $(n,e){if(n&1&&l(0,"rcp-user-card",7),n&2){let a=e.$implicit;s("account",a)}}function W(n,e){n&1&&(r(0,"h5",8),c(1,"No results found!"),i())}var D=class n{authService=d(O);route=d(q);router=d(I);accountsResSig=this.authService.accountsSig;queryParam=R(this.route.queryParamMap);query=w(()=>{let e=this.queryParam();return new N(e?.get("search")??void 0,e?.get("role")??void 0,e?.get("page")??void 0,e?.get("pageSize")??void 0,e?.get("sort")??void 0)});userRolesEnum=F;constructor(){let e="";b(()=>{let a=this.query(),t=JSON.stringify(a);t!==e&&(e=t,this.authService.relaodAccountList(a))},{allowSignalWrites:!0})}onSearchChanged(e){this.router.navigate([],{queryParams:{search:e,page:1},queryParamsHandling:"merge"})}onRoleChanged(e){this.router.navigate([],{queryParams:{role:e,page:1},queryParamsHandling:"merge"})}onPagingChange(e){this.router.navigate([],{queryParams:e,queryParamsHandling:"merge"})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=g({type:n,selectors:[["rcp-user-list"]],standalone:!0,features:[_([y]),C],decls:12,vars:11,consts:[[1,"container"],[1,"form","form--filter"],[1,"fa-solid","fa-magnifying-glass"],["modelName","searchString","inpType","text","placeholder","Username or Email",3,"onInpChanged","isTypeAhead","inpValue"],["modelName","role","placeholder","All roles",3,"onSelectChanged","selectListEnum","inpValue","selectEcceptions"],[1,"card-container"],["title","Add new user",1,"card-container__add","btn","accent",3,"routerLink"],[3,"account"],[1,"row","row--centered","row--middle"],[3,"onPagingChange","paging"]],template:function(a,t){if(a&1&&(r(0,"div",0)(1,"form",1),l(2,"i",2),r(3,"clt-input-field",3),f("onInpChanged",function(p){return t.onSearchChanged(p)}),i(),r(4,"clt-input-select",4),f("onSelectChanged",function(p){return t.onRoleChanged(p)}),i()(),r(5,"div",5)(6,"span",6),c(7," + "),i(),x(8,$,1,1,"rcp-user-card",7,H,!1,W,2,0,"h5",8),i(),r(11,"clt-paging",9),f("onPagingChange",function(p){return t.onPagingChange(p)}),i()()),a&2){let u;o(3),s("isTypeAhead",!0)("inpValue",(u=t.query().search)!==null&&u!==void 0?u:""),o(),s("selectListEnum",t.userRolesEnum)("inpValue",t.query().role)("selectEcceptions",m(8,J,t.userRolesEnum.GUEST)),o(2),s("routerLink",U(10,Q)),o(2),L(t.accountsResSig().data),o(3),s("paging",t.accountsResSig().metaData)}},dependencies:[h,A,T,k,S],styles:[".card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,390px)}.account[_ngcontent-%COMP%]{width:fit-content;height:fit-content;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;padding:1rem}.account[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:130px}.account[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.05)}.account__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:90px 130px;justify-items:start}"]})};export{D as UserListComponent};
