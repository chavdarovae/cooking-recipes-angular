import{a as Q,b as W}from"./chunk-BX74QCOJ.js";import"./chunk-2ON5S4CW.js";import{a as G,b as H,c as Y,d as z,e as J,f as K}from"./chunk-2BZ7BMZ6.js";import{a as q}from"./chunk-HTD5VXYV.js";import{b as L,i as $}from"./chunk-43QX4XP5.js";import{A as U,Aa as k,B as N,Ca as w,Da as x,Ea as I,Ga as j,I as p,J as d,Ra as A,S as s,Ta as M,Va as O,Xa as P,Y as _,_ as c,ba as h,d as b,e as y,fa as a,ga as l,hb as B,ia as R,ja as F,la as C,m as S,ma as u,mb as D,na as o,o as V,s as T,t as v,ua as g,va as f,xa as E}from"./chunk-GIOW2ZCS.js";var Z=t=>({ui:t}),ee=t=>[t];function te(t,n){if(t&1){let e=C();a(0,"clt-input-field",10),u("onInpChanged",function(r){p(e);let m=o(2);return d(m.user.password=r)}),l()}if(t&2){let e=o(2);c("inpValue",e.user.password)}}function ie(t,n){if(t&1){let e=C();a(0,"button",11),u("click",function(){p(e);let r=o(2);return d(r.userIteractionSubj.next("delete"))}),f(1),x(2,"titlecase"),l(),a(3,"button",12),u("click",function(){p(e);let r=o(2);return d(r.userIteractionSubj.next("update"))}),f(4),x(5,"titlecase"),l()}if(t&2){o();let e=g(2);s(),E(" ",I(2,3,"delete")," User "),s(2),c("disabled",e.invalid||e.pristine),s(),E(" ",I(5,5,"update")," User ")}}function ne(t,n){if(t&1){let e=C();a(0,"button",13),u("click",function(){p(e);let r=o(2);return d(r.userIteractionSubj.next("create"))}),f(1),x(2,"titlecase"),l()}if(t&2){o();let e=g(2);c("disabled",e.invalid||e.pristine),s(),E(" ",I(2,2,"create")," User ")}}function re(t,n){if(t&1){let e=C();a(0,"div",2)(1,"form",3,1)(3,"clt-input-field",4),u("onInpChanged",function(r){p(e);let m=o();return d(m.user.username=r)}),l(),a(4,"clt-input-field",5),u("onInpChanged",function(r){p(e);let m=o();return d(m.user.email=r)}),l(),_(5,te,1,1,"clt-input-field",6),a(6,"clt-input-select",7),u("onSelectChanged",function(r){p(e);let m=o();return d(m.user.role=r)}),l(),a(7,"div",8),_(8,ie,6,7)(9,ne,3,4,"button",9),l()()()}if(t&2){let e,i=o();s(3),c("minLength",5)("isRequired",!0)("inpValue",(e=i.user.username)!==null&&e!==void 0?e:""),s(),c("isDisabled",i.isEditEntity(i.user))("inpValue",i.user.email),s(),h(i.isCreateEntity(i.user)?5:-1),s(),c("selectListEnum",i.userRolesEnum)("inpValue",i.user.role)("selectEcceptions",w(10,ee,i.userRolesEnum.GUEST)),s(2),h(i.isEditEntity(i.user)?8:i.isCreateEntity(i.user)?9:-1)}}function oe(t,n){if(t&1&&(R(0),f(1),F()),t&2){let e=o(2).fieldName;s(),E("",e," is required field")}}function se(t,n){if(t&1&&(a(0,"div",15),_(1,oe,2,1,"ng-container",16),l()),t&2){let e=o().field;s(),c("ngIf",e==null||e.errors==null?null:e.errors.required)}}function ae(t,n){if(t&1&&_(0,se,2,1,"div",14),t&2){let e=n.field;c("ngIf",e.invalid&&!e.pristine)}}var X=class t{userService=U($);alertService=U(q);router=U(B);userIteractionSubj=new b;userIteraction$;user;currInteraction;userRolesEnum=L;id;ngOnInit(){this.user=new W(history.state?.user),!this.user&&this.id==="add-new-user"&&(this.user=new Q),this.initUserInteraction()}isEditEntity(n){return n&&n.id}isCreateEntity(n){return n&&!n.id}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(V(),v(n=>this.currInteraction=n),T(n=>{switch(n){case"create":return this.userService.createAccount(this.user);case"update":return this.userService.updateAccount(this.user);case"delete":return this.userService.deleteAccount(this.user)}}),v(()=>{this.router.navigateByUrl("/users"),this.alertService.showAlert({alert:`The user was successfully ${this.currInteraction}d!`,type:"success"})}),S(n=>(console.error("User operation failed:",n),this.initUserInteraction(),y)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=N({type:t,selectors:[["rcp-user-create-edit"]],inputs:{id:"id"},standalone:!0,features:[k],decls:4,vars:5,consts:[["hintRef",""],["userEditForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Username","modelName","usesrname","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Email","modelName","email","inpType","text",3,"onInpChanged","isDisabled","inpValue"],["label","Password","modelName","password","inpType","password",3,"inpValue"],["label","Role","modelName","role",3,"onSelectChanged","selectListEnum","inpValue","selectEcceptions"],[1,"row","row--no-wrap"],["type","submit",1,"accent","ml-a",3,"disabled"],["label","Password","modelName","password","inpType","password",3,"onInpChanged","inpValue"],[1,"danger",3,"click"],["type","submit",1,"accent","ml-50",3,"click","disabled"],["type","submit",1,"accent","ml-a",3,"click","disabled"],["class","form__hint",4,"ngIf"],[1,"form__hint"],[4,"ngIf"]],template:function(e,i){if(e&1&&(_(0,re,10,12,"div",2),x(1,"async"),_(2,ae,1,1,"ng-template",null,0,j)),e&2){let r;h((r=w(3,Z,I(1,1,i.userIteraction$)))?0:-1,r)}},dependencies:[P,A,M,O,z,Y,G,H,D,J,K]})};export{X as UserCreateEditComponent};
