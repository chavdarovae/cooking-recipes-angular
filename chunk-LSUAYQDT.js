import{c as D}from"./chunk-KXD2RVXV.js";import{b as y,e as T,f as k,i as N}from"./chunk-TCHUYFJE.js";import{j as A}from"./chunk-JN2JX5UF.js";import{a as R,b as F,i as O}from"./chunk-4JPLKD5E.js";import{A as l,Aa as C,B as g,Ba as M,Ca as d,La as w,Na as b,O as P,R as E,S as o,_ as s,da as x,ea as L,eb as q,fa as r,ga as a,gb as I,ha as m,hb as h,ma as f,va as c,wa as v,xa as U,za as _}from"./chunk-DNCVGDDY.js";var G=n=>["/users/crate-edit/",n],H=n=>({user:n}),S=class n{account=P.required();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["rcp-user-card"]],inputs:{account:[1,"account"]},standalone:!0,features:[_([y]),C],decls:17,vars:10,consts:[[1,"account","jumpy-card","row","row--no-wrap","gap-20"],[1,"fa-solid","fa-user"],[1,"account__body","col","col--no-wrap","gap-10"],[1,"text-accent"],[1,"text-accent",3,"href"],["routerLinkActive","router-link-active",1,"accent","span-2","w100","mt-10",3,"routerLink","state"]],template:function(i,t){i&1&&(r(0,"article",0),m(1,"i",1),r(2,"div",2)(3,"span"),c(4,"Username:"),a(),r(5,"span",3),c(6),a(),r(7,"span"),c(8,"Email:"),a(),r(9,"a",4),c(10),a(),r(11,"span"),c(12,"Role:"),a(),r(13,"span",3),c(14),a(),r(15,"button",5),c(16," Edit User "),a()()()),i&2&&(o(6),v(t.account().username),o(3),s("href","mailto:"+t.account().email,E),o(),U(" ",t.account().email," "),o(4),v(t.account().role),o(),s("routerLink",d(6,G,t.account().id))("state",d(8,H,t.account())))},dependencies:[h],styles:[".card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,390px)}.account[_ngcontent-%COMP%]{width:fit-content;height:fit-content;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;padding:1rem}.account[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:130px}.account[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.05)}.account__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:90px 130px;justify-items:start}"]})};var J=(n,e)=>e.id,Q=n=>[n],$=()=>["/users/crate-edit/add-new-entity"];function W(n,e){if(n&1&&m(0,"rcp-user-card",7),n&2){let i=e.$implicit;s("account",i)}}function B(n,e){n&1&&(r(0,"h5",8),c(1,"No results found!"),a())}var z=class n{authService=l(O);route=l(q);router=l(I);paginationService=l(A);accountsResSig=this.authService.accountsSig;queryParam=R(this.route.queryParamMap);query=w(()=>{let e=this.queryParam();return new D(e?.get("search")??void 0,e?.get("role")??void 0,e?.get("page")??void 0,e?.get("pageSize")??void 0,e?.get("sort")??void 0)});userRolesEnum=F;constructor(){let e="";b(()=>{let i=this.query(),t=JSON.stringify(i);t!==e&&(e=t,this.authService.relaodAccountList(i),this.paginationService.setState(i))},{allowSignalWrites:!0})}onSearchChanged(e){this.router.navigate([],{queryParams:{search:e,page:1},queryParamsHandling:"merge"})}onRoleChanged(e){this.router.navigate([],{queryParams:{role:e,page:1},queryParamsHandling:"merge"})}onPagingChange(e){this.router.navigate([],{queryParams:e,queryParamsHandling:"merge"})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=g({type:n,selectors:[["rcp-user-list"]],standalone:!0,features:[_([y]),C],decls:12,vars:11,consts:[[1,"container"],[1,"form","form--filter"],[1,"fa-solid","fa-magnifying-glass"],["modelName","searchString","inpType","text","placeholder","Username or Email",3,"onInpChanged","isTypeAhead","inpValue"],["modelName","role","placeholder","All roles",3,"onSelectChanged","selectListEnum","inpValue","selectEcceptions"],[1,"card-container"],["title","Add new user",1,"card-container__add","btn","accent",3,"routerLink"],[3,"account"],[1,"row","row--centered","row--middle"],[3,"onPagingChange","paging"]],template:function(i,t){if(i&1&&(r(0,"div",0)(1,"form",1),m(2,"i",2),r(3,"clt-input-field",3),f("onInpChanged",function(p){return t.onSearchChanged(p)}),a(),r(4,"clt-input-select",4),f("onSelectChanged",function(p){return t.onRoleChanged(p)}),a()(),r(5,"div",5)(6,"span",6),c(7," + "),a(),x(8,W,1,1,"rcp-user-card",7,J,!1,B,2,0,"h5",8),a(),r(11,"clt-pagination",9),f("onPagingChange",function(p){return t.onPagingChange(p)}),a()()),i&2){let u;o(3),s("isTypeAhead",!0)("inpValue",(u=t.query().search)!==null&&u!==void 0?u:""),o(),s("selectListEnum",t.userRolesEnum)("inpValue",t.query().role)("selectEcceptions",d(8,Q,t.userRolesEnum.GUEST)),o(2),s("routerLink",M(10,$)),o(2),L(t.accountsResSig().data),o(3),s("paging",t.accountsResSig().metaData)}},dependencies:[h,T,k,N,S],styles:[".card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,390px)}.account[_ngcontent-%COMP%]{width:fit-content;height:fit-content;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;padding:1rem}.account[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:130px}.account[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.05)}.account__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:90px 130px;justify-items:start}"]})};export{z as UserListComponent};
