import{a as J,b as K}from"./chunk-57TSADVX.js";import{a as z}from"./chunk-FNHM37C2.js";import"./chunk-CZVA6VX6.js";import{a as $,b as A,c as B,d as H,e as G,g as Y}from"./chunk-AZULAH5C.js";import{a as D}from"./chunk-GF53FXYZ.js";import{h as O}from"./chunk-PKBOFJVN.js";import{A as _,Aa as L,B as S,Ba as q,Ca as U,Da as R,Ea as f,I as l,J as m,S as a,Ta as N,Ua as F,Wa as M,Y as h,_ as c,ba as I,d as x,e as v,fa as s,ga as d,gb as P,hb as k,la as V,lb as j,m as y,ma as u,na as p,o as w,s as b,t as C,ua as T,va as g,xa as E}from"./chunk-DNCVGDDY.js";var W=n=>({ui:n}),X=()=>["/recipes"];function Z(n,r){if(n&1){let e=V();s(0,"div",1)(1,"form",2,0)(3,"rcp-input-field",3),u("onInpChanged",function(i){l(e);let o=p(2);return m(o.recipe.title=i)}),d(),s(4,"rcp-input-textarea",4),u("onInpChanged",function(i){l(e);let o=p(2);return m(o.recipe.description=i)}),d(),s(5,"rcp-input-textarea",5),u("onInpChanged",function(i){l(e);let o=p(2);return m(o.recipe.ingredients=i)}),d(),s(6,"rcp-input-field",6),u("onInpChanged",function(i){l(e);let o=p(2);return m(o.recipe.instructions=i)}),d(),s(7,"rcp-input-field",7),u("onInpChanged",function(i){l(e);let o=p(2);return m(o.recipe.image=i)}),d(),s(8,"div",8)(9,"button",9),g(10," Back to Recipes "),d(),s(11,"button",10),u("click",function(){l(e);let i=p(2);return m(i.userIteractionSubj.next(i.allowedInteraction))}),g(12),R(13,"titlecase"),d()()()()}if(n&2){let e=T(2),t=p(2);a(3),c("minLength",2)("isRequired",!0)("inpValue",t.recipe.title),a(),c("minLength",10)("maxLength",100)("isRequired",!0)("inpValue",t.recipe.description),a(),c("minLength",10)("maxLength",400)("isRequired",!0)("inpValue",t.recipe.ingredients),a(),c("minLength",10)("isRequired",!0)("inpValue",t.recipe.instructions),a(),c("minLength",6)("isRequired",!0)("inpValue",t.recipe.image),a(2),c("routerLink",q(23,X))("queryParams",t.paginationService.prevReqMetaData()),a(2),c("disabled",e.invalid||e.pristine),a(),E(" ",f(13,21,t.allowedInteraction)," Recipe ")}}function ee(n,r){if(n&1&&h(0,Z,14,24,"div",1),n&2){let e=p();I(e.recipe?0:-1)}}var Q=class n{recipeService=_(z);alertService=_(D);router=_(P);paginationService=_(O);userIteractionSubj=new x;userIteraction$;allowedInteraction;recipe;currInteraction;id;ngOnInit(){history.state?.recipe?this.recipe=new K(history.state?.recipe):!this.recipe&&this.id==="add-new-entity"&&(this.recipe=new J),this.allowedInteraction=this.recipe?.id?"update":"create",this.initUserInteraction()}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(w(),C(r=>this.currInteraction=r),b(r=>{switch(r){case"create":return this.recipeService.create(this.recipe);case"update":return this.recipeService.update(this.id,this.recipe)}}),C(()=>{this.router.navigate(["/recipes"],{queryParams:this.paginationService.prevReqMetaData(),queryParamsHandling:"merge"}),this.alertService.showAlert({alert:`The recipe was successfully ${this.currInteraction}d!`,type:"success"})}),y(r=>(console.error("Recipe operation failed:",r),this.initUserInteraction(),v)))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["rcp-recipe-create-edit"]],inputs:{id:"id"},standalone:!0,features:[L],decls:2,vars:5,consts:[["createForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Recipe Title","modelName","recipeTitle","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Description","modelName","description",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Ingredients","modelName","ingredients",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Instructions","modelName","instructions","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Image URL","modelName","image","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],[1,"row","row--no-wrap","gap-20"],[3,"routerLink","queryParams"],["type","submit",1,"accent",3,"click","disabled"]],template:function(e,t){if(e&1&&(h(0,ee,1,1),R(1,"async")),e&2){let i;I((i=U(3,W,f(1,1,t.userIteraction$)))?0:-1,i)}},dependencies:[M,N,F,H,B,$,A,j,k,G,Y]})};export{Q as RecipeCreateEditComponent};
