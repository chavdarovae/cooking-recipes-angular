@if ({ ui: userIteraction$ | async }; as subs) {
    <div class="container">
        <form
            #userEditForm="ngForm"
            class="form w50 pt-30 pb-30 pl-50 pr-50">
            <rcp-input-field
                label="Username"
                modelName="usesrname"
                inpType="text"
                [minLength]="5"
                [isRequired]="true"
                [inpValue]="user.username"
                (onInpChanged)="user.username = $event"></rcp-input-field>

            <rcp-input-field
                label="Email"
                modelName="email"
                inpType="text"
                [isDisabled]="isUpdateEntity(user)"
                [inpValue]="user.email"
                (onInpChanged)="user.email = $event"></rcp-input-field>

            @if (isCreateEntity(user)) {
                <rcp-input-field
                    label="Password"
                    modelName="password"
                    inpType="password"
                    [inpValue]="user.password"
                    (onInpChanged)="user.password = $event"></rcp-input-field>
            }

            <rcp-input-select
                label="Role"
                modelName="role"
                [selectListEnum]="userRolesEnum"
                [inpValue]="user.role"
                [selectEcceptions]="[userRolesEnum.GUEST]"
                (onSelectChanged)="user.role = $event"></rcp-input-select>

            <div class="row row--no-wrap gap-20">
                <button
                    [routerLink]="['/users']"
                    [queryParams]="paginationService.prevReqMetaData()">
                    Back to Users
                </button>
                @if (isUpdateEntity(user)) {
                    <button
                        class="danger"
                        (click)="userIteractionSubj.next('delete')">
                        {{ 'delete' | titlecase }} User
                    </button>
                }
                <button
                    type="submit"
                    class="accent"
                    (click)="userIteractionSubj.next(allowedInteraction)"
                    [disabled]="userEditForm.invalid || userEditForm.pristine">
                    {{ allowedInteraction | titlecase }} User
                </button>
            </div>
        </form>
    </div>
}

<ng-template
    #hintRef
    let-field="field"
    let-fieldName="fieldName">
    <div
        *ngIf="field.invalid && !field.pristine"
        class="form__hint">
        <ng-container *ngIf="field?.errors?.['required']">{{ fieldName }} is required field</ng-container>
    </div>
</ng-template>
