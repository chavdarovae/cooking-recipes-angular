import{a as Z,b as ee}from"./chunk-SFFYAGPG.js";import"./chunk-CZVA6VX6.js";import{a as Y,b as z,c as J,d as K,e as W,f as X}from"./chunk-AZULAH5C.js";import{a as $}from"./chunk-GF53FXYZ.js";import{b as G,h as H,i as Q}from"./chunk-PKBOFJVN.js";import{A as C,Aa as k,B as V,Ba as P,Ca as v,Da as x,Ea as E,Ga as M,I as u,J as d,Ra as j,S as o,Ta as q,Ua as A,Wa as L,Y as m,_ as a,ba as I,d as w,e as y,fa as l,ga as p,gb as D,hb as O,ia as R,ja as N,la as U,lb as B,m as S,ma as _,na as s,o as b,s as T,t as g,ua as F,va as f,xa as h}from"./chunk-DNCVGDDY.js";var ie=t=>({ui:t}),ne=t=>[t],re=()=>["/users"];function oe(t,n){if(t&1){let e=U();l(0,"rcp-input-field",12),_("onInpChanged",function(r){u(e);let c=s(2);return d(c.user.password=r)}),p()}if(t&2){let e=s(2);a("inpValue",e.user.password)}}function se(t,n){if(t&1){let e=U();l(0,"button",13),_("click",function(){u(e);let r=s(2);return d(r.userIteractionSubj.next("delete"))}),f(1),x(2,"titlecase"),p()}t&2&&(o(),h(" ",E(2,1,"delete")," User "))}function ae(t,n){if(t&1){let e=U();l(0,"div",2)(1,"form",3,1)(3,"rcp-input-field",4),_("onInpChanged",function(r){u(e);let c=s();return d(c.user.username=r)}),p(),l(4,"rcp-input-field",5),_("onInpChanged",function(r){u(e);let c=s();return d(c.user.email=r)}),p(),m(5,oe,1,1,"rcp-input-field",6),l(6,"rcp-input-select",7),_("onSelectChanged",function(r){u(e);let c=s();return d(c.user.role=r)}),p(),l(7,"div",8)(8,"button",9),f(9," Back to Users "),p(),m(10,se,3,3,"button",10),l(11,"button",11),_("click",function(){u(e);let r=s();return d(r.userIteractionSubj.next(r.allowedInteraction))}),f(12),x(13,"titlecase"),p()()()()}if(t&2){let e=F(2),i=s();o(3),a("minLength",5)("isRequired",!0)("inpValue",i.user.username),o(),a("isDisabled",i.isUpdateEntity(i.user))("inpValue",i.user.email),o(),I(i.isCreateEntity(i.user)?5:-1),o(),a("selectListEnum",i.userRolesEnum)("inpValue",i.user.role)("selectEcceptions",v(16,ne,i.userRolesEnum.GUEST)),o(2),a("routerLink",P(18,re))("queryParams",i.paginationService.prevReqMetaData()),o(2),I(i.isUpdateEntity(i.user)?10:-1),o(),a("disabled",e.invalid||e.pristine),o(),h(" ",E(13,14,i.allowedInteraction)," User ")}}function le(t,n){if(t&1&&(R(0),f(1),N()),t&2){let e=s(2).fieldName;o(),h("",e," is required field")}}function pe(t,n){if(t&1&&(l(0,"div",15),m(1,le,2,1,"ng-container",16),p()),t&2){let e=s().field;o(),a("ngIf",e==null||e.errors==null?null:e.errors.required)}}function ce(t,n){if(t&1&&m(0,pe,2,1,"div",14),t&2){let e=n.field;a("ngIf",e.invalid&&!e.pristine)}}var te=class t{userService=C(Q);alertService=C($);router=C(D);paginationService=C(H);userIteractionSubj=new w;userIteraction$;allowedInteraction;user;currInteraction;userRolesEnum=G;id;ngOnInit(){history.state?.user?this.user=new ee(history.state?.user):!this.user&&this.id==="add-new-entity"&&(this.user=new Z),this.allowedInteraction=this.user?.id?"update":"create",this.initUserInteraction()}isUpdateEntity(n){return n&&n.id}isCreateEntity(n){return n&&!n.id}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(b(),g(n=>this.currInteraction=n),T(n=>{switch(n){case"create":return this.userService.createAccount(this.user);case"update":return this.userService.updateAccount(this.user);case"delete":return this.userService.deleteAccount(this.id)}}),g(()=>{this.router.navigateByUrl("/users"),this.alertService.showAlert({alert:`The user was successfully ${this.currInteraction}d!`,type:"success"})}),S(n=>(console.error("User operation failed:",n),this.initUserInteraction(),y)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["rcp-user-create-edit"]],inputs:{id:"id"},standalone:!0,features:[k],decls:4,vars:5,consts:[["hintRef",""],["userEditForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Username","modelName","usesrname","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Email","modelName","email","inpType","text",3,"onInpChanged","isDisabled","inpValue"],["label","Password","modelName","password","inpType","password",3,"inpValue"],["label","Role","modelName","role",3,"onSelectChanged","selectListEnum","inpValue","selectEcceptions"],[1,"row","row--no-wrap","gap-20"],[3,"routerLink","queryParams"],[1,"danger"],["type","submit",1,"accent",3,"click","disabled"],["label","Password","modelName","password","inpType","password",3,"onInpChanged","inpValue"],[1,"danger",3,"click"],["class","form__hint",4,"ngIf"],[1,"form__hint"],[4,"ngIf"]],template:function(e,i){if(e&1&&(m(0,ae,14,19,"div",2),x(1,"async"),m(2,ce,1,1,"ng-template",null,0,M)),e&2){let r;I((r=v(3,ie,E(1,1,i.userIteraction$)))?0:-1,r)}},dependencies:[L,j,q,A,K,J,Y,z,B,O,W,X]})};export{te as UserCreateEditComponent};
