import{a as Q,b as W}from"./chunk-JY37R5R5.js";import"./chunk-Z65ZXUWY.js";import{a as G,b as H,c as Y,d as z,e as J,f as K}from"./chunk-BX6ACGL5.js";import{a as B}from"./chunk-RNLBHKP2.js";import{b as L,i as $}from"./chunk-ZWFIAJ3M.js";import{A as C,Aa as j,B as V,Ca as v,Da as h,Ea as x,Ga as A,I as d,J as u,Ra as M,S as o,Ta as k,Ua as O,Wa as P,Y as m,_ as l,ba as f,d as w,e as y,fa as a,ga as p,gb as D,ia as R,ja as N,la as I,lb as q,m as b,ma as _,na as s,o as S,s as T,t as g,ua as F,va as U,xa as E}from"./chunk-DNCVGDDY.js";var Z=t=>({ui:t}),ee=t=>[t];function te(t,i){if(t&1){let e=I();a(0,"clt-input-field",11),_("onInpChanged",function(r){d(e);let c=s(2);return u(c.user.password=r)}),p()}if(t&2){let e=s(2);l("inpValue",e.user.password)}}function ie(t,i){if(t&1){let e=I();a(0,"button",12),_("click",function(){d(e);let r=s(2);return u(r.userIteractionSubj.next("delete"))}),U(1),h(2,"titlecase"),p()}t&2&&(o(),E(" ",x(2,1,"delete")," User "))}function ne(t,i){if(t&1){let e=I();a(0,"div",2)(1,"form",3,1)(3,"clt-input-field",4),_("onInpChanged",function(r){d(e);let c=s();return u(c.user.username=r)}),p(),a(4,"clt-input-field",5),_("onInpChanged",function(r){d(e);let c=s();return u(c.user.email=r)}),p(),m(5,te,1,1,"clt-input-field",6),a(6,"clt-input-select",7),_("onSelectChanged",function(r){d(e);let c=s();return u(c.user.role=r)}),p(),a(7,"div",8),m(8,ie,3,3,"button",9),a(9,"button",10),_("click",function(){d(e);let r=s();return u(r.userIteractionSubj.next(r.allowedInteraction))}),U(10),h(11,"titlecase"),p()()()()}if(t&2){let e=F(2),n=s();o(3),l("minLength",5)("isRequired",!0)("inpValue",n.user.username),o(),l("isDisabled",n.isEditEntity(n.user))("inpValue",n.user.email),o(),f(n.isCreateEntity(n.user)?5:-1),o(),l("selectListEnum",n.userRolesEnum)("inpValue",n.user.role)("selectEcceptions",v(14,ee,n.userRolesEnum.GUEST)),o(2),f(n.isEditEntity(n.user)?8:-1),o(),l("disabled",e.invalid||e.pristine),o(),E(" ",x(11,12,n.allowedInteraction)," User ")}}function re(t,i){if(t&1&&(R(0),U(1),N()),t&2){let e=s(2).fieldName;o(),E("",e," is required field")}}function oe(t,i){if(t&1&&(a(0,"div",14),m(1,re,2,1,"ng-container",15),p()),t&2){let e=s().field;o(),l("ngIf",e==null||e.errors==null?null:e.errors.required)}}function se(t,i){if(t&1&&m(0,oe,2,1,"div",13),t&2){let e=i.field;l("ngIf",e.invalid&&!e.pristine)}}var X=class t{userService=C($);alertService=C(B);router=C(D);userIteractionSubj=new w;userIteraction$;allowedInteraction;user;currInteraction;userRolesEnum=L;id;ngOnInit(){history.state?.user?this.user=new W(history.state?.user):!this.user&&this.id==="add-new-entity"&&(this.user=new Q),this.allowedInteraction=this.user?.id?"update":"create",this.initUserInteraction()}isEditEntity(i){return i&&i.id}isCreateEntity(i){return i&&!i.id}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(S(),g(i=>this.currInteraction=i),T(i=>{switch(i){case"create":return this.userService.createAccount(this.user);case"update":return this.userService.updateAccount(this.user);case"delete":return this.userService.deleteAccount(this.id)}}),g(()=>{this.router.navigateByUrl("/users"),this.alertService.showAlert({alert:`The user was successfully ${this.currInteraction}d!`,type:"success"})}),b(i=>(console.error("User operation failed:",i),this.initUserInteraction(),y)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["rcp-user-create-edit"]],inputs:{id:"id"},standalone:!0,features:[j],decls:4,vars:5,consts:[["hintRef",""],["userEditForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Username","modelName","usesrname","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Email","modelName","email","inpType","text",3,"onInpChanged","isDisabled","inpValue"],["label","Password","modelName","password","inpType","password",3,"inpValue"],["label","Role","modelName","role",3,"onSelectChanged","selectListEnum","inpValue","selectEcceptions"],[1,"row","row--no-wrap","gap-50"],[1,"danger"],["type","submit",1,"accent",3,"click","disabled"],["label","Password","modelName","password","inpType","password",3,"onInpChanged","inpValue"],[1,"danger",3,"click"],["class","form__hint",4,"ngIf"],[1,"form__hint"],[4,"ngIf"]],template:function(e,n){if(e&1&&(m(0,ne,12,16,"div",2),h(1,"async"),m(2,se,1,1,"ng-template",null,0,A)),e&2){let r;f((r=v(3,Z,x(1,1,n.userIteraction$)))?0:-1,r)}},dependencies:[P,M,k,O,z,Y,G,H,q,J,K]})};export{X as UserCreateEditComponent};
