import{a as G,b as Y}from"./chunk-PDF2RALA.js";import{a as H}from"./chunk-S47I7G2B.js";import"./chunk-Z65ZXUWY.js";import{a as D,b as P,c as $,d as k,e as A,g as B}from"./chunk-BX6ACGL5.js";import{a as O}from"./chunk-RNLBHKP2.js";import"./chunk-ZWFIAJ3M.js";import{A as _,Aa as L,B as b,Ca as U,Da as f,Ea as R,I as c,J as s,S as a,Ta as N,Ua as q,Wa as F,Y as h,_ as l,ba as I,d as g,e as x,fa as d,ga as m,gb as M,la as V,lb as j,m as v,ma as u,na as p,o as w,s as y,t as C,ua as T,va as E,xa as S}from"./chunk-DNCVGDDY.js";var J=n=>({ui:n});function K(n,r){if(n&1){let e=V();d(0,"div",1)(1,"form",2,0)(3,"clt-input-field",3),u("onInpChanged",function(t){c(e);let o=p(2);return s(o.recipe.title=t)}),m(),d(4,"clt-input-textarea",4),u("onInpChanged",function(t){c(e);let o=p(2);return s(o.recipe.description=t)}),m(),d(5,"clt-input-textarea",5),u("onInpChanged",function(t){c(e);let o=p(2);return s(o.recipe.ingredients=t)}),m(),d(6,"clt-input-field",6),u("onInpChanged",function(t){c(e);let o=p(2);return s(o.recipe.instructions=t)}),m(),d(7,"clt-input-field",7),u("onInpChanged",function(t){c(e);let o=p(2);return s(o.recipe.image=t)}),m(),d(8,"div")(9,"button",8),u("click",function(){c(e);let t=p(2);return s(t.userIteractionSubj.next(t.allowedInteraction))}),E(10),f(11,"titlecase"),m()()()()}if(n&2){let e=T(2),i=p(2);a(3),l("minLength",2)("isRequired",!0)("inpValue",i.recipe.title),a(),l("minLength",10)("maxLength",100)("isRequired",!0)("inpValue",i.recipe.description),a(),l("minLength",10)("maxLength",400)("isRequired",!0)("inpValue",i.recipe.ingredients),a(),l("minLength",10)("isRequired",!0)("inpValue",i.recipe.instructions),a(),l("minLength",6)("isRequired",!0)("inpValue",i.recipe.image),a(2),l("disabled",e.invalid||e.pristine),a(),S(" ",R(11,19,i.allowedInteraction)," Recipe ")}}function Q(n,r){if(n&1&&h(0,K,12,21,"div",1),n&2){let e=p();I(e.recipe?0:-1)}}var z=class n{recipeService=_(H);alertService=_(O);router=_(M);userIteractionSubj=new g;userIteraction$;allowedInteraction;recipe;currInteraction;id;ngOnInit(){history.state?.recipe?this.recipe=new Y(history.state?.recipe):!this.recipe&&this.id==="add-new-entity"&&(this.recipe=new G),this.allowedInteraction=this.recipe?.id?"update":"create",this.initUserInteraction()}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(w(),C(r=>this.currInteraction=r),y(r=>{switch(r){case"create":return this.recipeService.create(this.recipe);case"update":return this.recipeService.update(this.id,this.recipe)}}),C(()=>{this.router.navigateByUrl("/recipes"),this.alertService.showAlert({alert:`The recipe was successfully ${this.currInteraction}d!`,type:"success"})}),v(r=>(console.error("Recipe operation failed:",r),this.initUserInteraction(),x)))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["rcp-recipe-create-edit"]],inputs:{id:"id"},standalone:!0,features:[L],decls:2,vars:5,consts:[["createForm","ngForm"],[1,"container"],[1,"form","w80","pt-30","pb-30","pl-50","pr-50"],["label","Recipe Title","modelName","recipeTitle","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Description","modelName","description",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Ingredients","modelName","ingredients",3,"onInpChanged","minLength","maxLength","isRequired","inpValue"],["label","Instructions","modelName","instructions","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Image URL","modelName","instructions","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["type","submit",1,"accent",3,"click","disabled"]],template:function(e,i){if(e&1&&(h(0,Q,1,1),f(1,"async")),e&2){let t;I((t=U(3,J,R(1,1,i.userIteraction$)))?0:-1,t)}},dependencies:[F,N,q,k,$,D,P,j,A,B]})};export{z as RecipeCreateEditComponent};
