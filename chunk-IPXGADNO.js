import{a as W}from"./chunk-4YKXPSVK.js";import{a as k}from"./chunk-JFJJCYJA.js";import{a as G}from"./chunk-B3CAR57J.js";import{a as H,b as Y,c as z,d as J,e as K,f as Q}from"./chunk-MI44FUCB.js";import{b as B}from"./chunk-5K5ODEUE.js";import{A as u,B as T,Ba as E,Ca as h,Da as U,Fa as O,I as m,J as d,Pa as A,Ra as D,S as r,Ta as q,Va as L,Y as l,_ as s,ba as w,d as g,db as P,e as x,fa as p,ga as c,ha as V,hb as $,ia as R,ja as N,la as F,m as b,ma as _,na as a,o as y,s as S,t as C,ua as M,va as I,xa as v,za as j}from"./chunk-K4TDJKIY.js";var Z=t=>({ui:t}),ee=t=>[t];function te(t,n){if(t&1){let e=F();p(0,"div",2)(1,"form",3,1)(3,"clt-input-field",4),_("onInpChanged",function(i){m(e);let f=a();return d(f.user.username=i)}),c(),V(4,"clt-input-field",5),p(5,"clt-input-select",6),_("onSelectChanged",function(i){m(e);let f=a();return d(f.user.role=i)}),c(),p(6,"div")(7,"button",7),_("click",function(){m(e);let i=a();return d(i.userIteractionSubj.next("update"))}),I(8),h(9,"titlecase"),c()()()()}if(t&2){let e,o=M(2),i=a();r(3),s("minLength",5)("isRequired",!0)("inpValue",(e=i.user.username)!==null&&e!==void 0?e:""),r(),s("isDisabled",!0)("inpValue",i.user.email),r(),s("selectList",i.userRolesEnum)("inpValue",i.user.role)("selectEcceptions",E(12,ee,i.userRolesEnum.GUEST)),r(2),s("disabled",o.invalid||!o.dirty),r(),v(" ",U(9,10,"update")," User ")}}function ie(t,n){if(t&1&&(R(0),I(1),N()),t&2){let e=a(2).fieldName;r(),v(" ",e," is required field ")}}function ne(t,n){if(t&1&&(p(0,"div",9),l(1,ie,2,1,"ng-container",10),c()),t&2){let e=a().field;r(),s("ngIf",e==null||e.errors==null?null:e.errors.required)}}function re(t,n){if(t&1&&l(0,ne,2,1,"div",8),t&2){let e=n.field;s("ngIf",e.invalid&&!e.pristine)}}var X=class t{userService=u(G);alertService=u(k);router=u(P);userIteractionSubj=new g;userIteraction$;user;currInteraction;userRolesEnum=B;ngOnInit(){this.user=new W(history.state?.user),this.initUserInteraction()}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(y(),C(n=>this.currInteraction=n),S(n=>{switch(n){case"update":return this.userService.updateAccount(this.user)}}),C(()=>{this.router.navigateByUrl("/users"),this.alertService.showAlert({alert:`The user was successfully ${this.currInteraction}d!`,type:"success"})}),b(n=>(console.error("User operation failed:",n),this.initUserInteraction(),x)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-user-edit"]],standalone:!0,features:[j],decls:4,vars:5,consts:[["hintRef",""],["userEditForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Username","modelName","usesrname","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Email","modelName","email","inpType","text",3,"isDisabled","inpValue"],["label","Role","modelName","role",3,"onSelectChanged","selectList","inpValue","selectEcceptions"],["type","submit",1,"accent",3,"click","disabled"],["class","form__hint",4,"ngIf"],[1,"form__hint"],[4,"ngIf"]],template:function(e,o){if(e&1&&(l(0,te,10,14,"div",2),h(1,"async"),l(2,re,1,1,"ng-template",null,0,O)),e&2){let i;w((i=E(3,Z,U(1,1,o.userIteraction$)))?0:-1,i)}},dependencies:[L,A,D,q,J,z,H,Y,$,K,Q]})};export{X as UserEditComponent};
