import{a as G}from"./chunk-FNHM37C2.js";import{h as Y}from"./chunk-AZULAH5C.js";import{a as H}from"./chunk-GF53FXYZ.js";import{h as N,i as Q}from"./chunk-PKBOFJVN.js";import{A as d,Aa as j,B as L,Ba as A,Ca as w,Da as F,Ea as B,I as S,J as v,R as V,S as r,Ta as $,Y as f,_ as g,ba as x,d as E,e as M,fa as o,g as O,ga as n,gb as q,ha as m,hb as z,la as R,m as P,ma as b,na as p,o as T,qa as I,s as U,t as _,va as c,wa as u}from"./chunk-DNCVGDDY.js";var K=t=>({ui:t}),W=()=>["/recipes"],X=t=>[t],Z=t=>({recipe:t});function ee(t,i){if(t&1){let e=R();o(0,"button",11),b("click",function(){S(e);let a=p(3);return v(a.userIteractionSubj.next("deleteDialog"))}),c(1," Delete "),n(),o(2,"button",12),c(3," Edit "),n()}if(t&2){let e,l=p(3);r(2),g("routerLink",w(2,X,"/recipes/create-edit/"+((e=l.selectedRecipeSig())==null?null:e.id)))("state",w(4,Z,l.selectedRecipeSig()))}}function te(t,i){if(t&1){let e=R();o(0,"button",13),b("click",function(){S(e);let a=p(3);return v(a.userIteractionSubj.next("recommend"))}),c(1," Recommend "),n()}if(t&2){let e=p(3);g("disabled",e.isAlreadyRecommendedByCurrUser())}}function ie(t,i){t&1&&(o(0,"div"),c(1,"You've already recommended this recipe!"),n())}function ne(t,i){if(t&1){let e=R();o(0,"article",1)(1,"h2"),c(2),n(),o(3,"div",2)(4,"div",3)(5,"span"),c(6),n(),m(7,"i",4),n(),m(8,"img",5),n(),o(9,"div",6)(10,"p"),c(11),n(),m(12,"hr"),o(13,"h3"),c(14,"Ingredients:"),n(),o(15,"p"),c(16),n(),m(17,"hr"),o(18,"h3"),c(19,"Instructions:"),n(),o(20,"p"),c(21),n(),m(22,"hr"),o(23,"div",7)(24,"button",8),c(25," Back to Recipes "),n(),f(26,ee,4,6)(27,te,2,1,"button",9),n()()(),f(28,ie,2,0,"div"),o(29,"rcp-modal",10),b("close",function(a){S(e);let h=p(2);return v(h.onModalClosed(a))}),n()}if(t&2){let e,l,a,h,y,k,D,C,s=p(2);r(2),u((e=s.selectedRecipeSig())==null?null:e.title),r(4),u((l=s.selectedRecipeSig())==null||l.recommendList==null?null:l.recommendList.length),r(2),I("src",(a=s.selectedRecipeSig())==null?null:a.image,V),I("alt",(h=s.selectedRecipeSig())==null?null:h.title),r(3),u((y=s.selectedRecipeSig())==null?null:y.description),r(5),u((k=s.selectedRecipeSig())==null?null:k.ingredients),r(5),u((D=s.selectedRecipeSig())==null?null:D.instructions),r(3),g("routerLink",A(12,W))("queryParams",s.paginationService.prevReqMetaData()),r(2),x(((C=s.authService.currUserSig())==null?null:C.id)===((C=s.selectedRecipeSig())==null?null:C.owner)?26:27),r(2),x(-1),r(),g("show",s.showModal)}}function oe(t,i){if(t&1&&(o(0,"div",0),f(1,ne,30,13),n()),t&2){let e=p();r(),x(e.selectedRecipeSig()?1:-1)}}var J=class t{recipeService=d(G);alertService=d(H);router=d(q);authService=d(Q);paginationService=d(N);id;userIteractionSubj=new E;userIteraction$;currInteraction;selectedRecipeSig=this.recipeService.selectedRecipeSig;showModal=!1;ngOnInit(){this.recipeService.selectRecipe(this.id),this.initUserInteraction()}onModalClosed(i){i&&this.userIteractionSubj.next("delete"),this.showModal=!1}isAlreadyRecommendedByCurrUser(){let i=this.selectedRecipeSig(),e=this.authService.currUserSig()?.id;return!i?.recommendList||!e?!1:i.recommendList?.includes(e)}initUserInteraction(){this.userIteraction$=this.userIteractionSubj.asObservable().pipe(T((i,e)=>e.includes("Dialog")?!1:i===e),_(i=>this.currInteraction=i),U(i=>{switch(i){case"deleteDialog":return O("deleteDialog").pipe(_(()=>this.showModal=!0));case"delete":return this.recipeService.delete(this.selectedRecipeSig()?.id).pipe(_(()=>this.router.navigateByUrl("/recipes")));case"recommend":return this.recipeService.recommend(this.selectedRecipeSig()?.id)}}),_(()=>{["deleteDialog"].includes(this.currInteraction)||this.alertService.showAlert({alert:`The recipe was successfully ${this.currInteraction}d!`,type:"success"})}),P(i=>(console.error("Recipe operation failed:",i),this.initUserInteraction(),M)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=L({type:t,selectors:[["rcp-recipe-detail"]],inputs:{id:"id"},standalone:!0,features:[j],decls:2,vars:5,consts:[[1,"container"],[1,"recipe"],[1,"recipe__block"],[1,"likes"],[1,"fa-solid","fa-heart"],[3,"src","alt"],[1,"recipe__block","col","col--space-btw"],[1,"row","row--no-wrap","row--space-btw","gap-10","w100","mt-20"],[3,"routerLink","queryParams"],[1,"accent",3,"disabled"],["entity","recipe",3,"close","show"],[1,"danger",3,"click"],[1,"accent",3,"routerLink","state"],[1,"accent",3,"click","disabled"]],template:function(e,l){if(e&1&&(f(0,oe,2,1,"div",0),F(1,"async")),e&2){let a;x((a=w(3,K,B(1,1,l.userIteraction$)))?0:-1,a)}},dependencies:[z,Y,$],styles:[".recipe[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;gap:2rem;width:min(1000px,100%);height:fit-content;background:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:2rem;margin:auto;transition:transform .3s,box-shadow .3s}.recipe__block[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;overflow:hidden;position:relative}@media (min-width: 961px){.recipe__block[_ngcontent-%COMP%]{width:calc(500px - 3rem)}}.recipe[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;background-color:#2c3e50;color:#f5f5f5;padding:.5em;border-radius:8px;text-align:center;margin-bottom:0}.likes[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.likes[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#dc143c;font-size:50px}.likes[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;color:#f5f5f5;font-size:20px;font-weight:600;top:50%;left:50%;transform:translate(-50%,-60%)}"]})};export{J as RecipeDetailComponent};
